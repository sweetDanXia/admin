{"remainingRequest":"D:\\zdx\\project\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\zdx\\project\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\zdx\\project\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\zdx\\project\\admin\\src\\views\\CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\zdx\\project\\admin\\src\\views\\CategoryEdit.vue","mtime":1614953115582},{"path":"D:\\zdx\\project\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zdx\\project\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\zdx\\project\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zdx\\project\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3pkeC9wcm9qZWN0L2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIC8vIHR5cGU6U3RyaW5n5Y+v5Lul5LiN5YaZCiAgICBpZDoge30KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHBhcmVudDogIiIKICAgICAgfSwKICAgICAgcGFyZW50czogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaFBhcmVudHNPcHRpb25zKCk7CiAgICB0aGlzLmlkICYmIHRoaXMuZmV0Y2goKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kaHR0cC5nZXQoIi9jYXRlZ29yaWVzLyIuY29uY2F0KF90aGlzLmlkKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpcy5tb2RlbCA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6I635Y+W5YiG57G75YiX6KGo5o6l5Y+j5L2c5Li65LiK57qn5YiG57G75LiL5ouJ5qGG5p2l5rqQ5pWw5o2uCiAgICBmZXRjaFBhcmVudHNPcHRpb25zOiBmdW5jdGlvbiBmZXRjaFBhcmVudHNPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGh0dHAuZ2V0KCIvY2F0ZWdvcmllcyIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF90aGlzMi5wYXJlbnRzID0gcmVzLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczMuaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRodHRwLnB1dCgiL2NhdGVnb3JpZXMvIi5jb25jYXQoX3RoaXMzLmlkKSwgX3RoaXMzLm1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kaHR0cC5wb3N0KCJjYXRlZ29yaWVzIiwgX3RoaXMzLm1vZGVsKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLnB1c2goIi9jYXRlZ29yaWVzL2xpc3QiKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv53lrZjmiJDlip8iCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,EAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA;AAFA,OADA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,mBAAA;AACA,SAAA,EAAA,IAAA,KAAA,KAAA,EAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,KAAA,CAAA,GAAA,uBAAA,KAAA,CAAA,EAAA,EADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KAJA;AAKA;AACA,IAAA,mBANA,iCAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,KAAA,CAAA,GAAA,eADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,MAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KATA;AAUA,IAAA,IAVA,kBAUA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,MAAA,CAAA,EAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAGA,MAAA,CAAA,KAAA,CAAA,GAAA,uBAAA,MAAA,CAAA,EAAA,GAAA,MAAA,CAAA,KAAA,CAHA;;AAAA;AAGA,gBAAA,GAHA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,YAAA,EAAA,MAAA,CAAA,KAAA,CANA;;AAAA;AAMA,gBAAA,GANA;;AAAA;AAQA,gBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,kBAAA;;AACA,oBAAA,GAAA,IAAA,GAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA;AACA,oBAAA,IAAA,EAAA,SADA;AAEA,oBAAA,OAAA,EAAA;AAFA,mBAAA;AAIA;;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAzBA;AAlBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"categoryCreate\">\r\n    <h1>{{ id ? \"编辑\" : \"新建\" }}分类</h1>\r\n    <!-- 想要横向排列的话，可以给el-form加label-width -->\r\n    <!-- 点击保存时加上@submit.native.prevent=\"save\"，native表示原生表单，prevent表示阻止默认提交，不要跳转页面 -->\r\n    <el-form label-width=\"120px\" @submit.native.prevent=\"save\">\r\n      <el-form-item label=\"上级分类\">\r\n        <el-select v-model=\"model.parent\">\r\n          <el-option v-for=\"item in parents\" :key=\"item._id\" :label=\"item.name\" :value=\"item._id\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"model.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    // type:String可以不写\r\n    id: {},\r\n  },\r\n  data() {\r\n    return {\r\n      model: {\r\n        name: \"\",\r\n        parent:\"\"\r\n      },\r\n      parents:[]\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchParentsOptions()\r\n    this.id && this.fetch();\r\n  },\r\n  methods: {\r\n    async fetch() {\r\n      const res = await this.$http.get(`/categories/${this.id}`);\r\n      this.model = res.data;\r\n    },\r\n    // 获取分类列表接口作为上级分类下拉框来源数据\r\n    async fetchParentsOptions() {\r\n      const res = await this.$http.get(`/categories`);\r\n      this.parents = res.data;\r\n    },\r\n    async save() {\r\n      let res;\r\n      if (this.id) {\r\n        res = await this.$http.put(`/categories/${this.id}`, this.model);\r\n      } else {\r\n        // 平时可能会用.then()写回调函数，我们可以用async await将异步回调函数写法写成类似同步的写法\r\n        res = await this.$http.post(\"categories\", this.model);\r\n      }\r\n      this.$router.push(\"/categories/list\");\r\n      if (res && res.status == 200) {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"保存成功\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views"}]}